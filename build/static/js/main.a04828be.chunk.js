(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),i=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,n.name," ",n.number),r.a.createElement("button",{type:"button",onClick:t},"delete"),r.a.createElement("br",null))},s=t(3),l=t.n(s),m="http://localhost:3001/api/persons",d=function(){return l.a.get(m).then((function(e){return e.data}))},f=function(e){return l.a.post(m,e).then((function(e){return e.data}))},b=function(e,n){return l.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return l.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var n=e.persons,t=e.newKeyword,a=e.setPersons;return n.filter((function(e){return e.name.indexOf(t.trim())>=0})).map((function(e){return r.a.createElement(i,{key:e.name,person:e,deletePerson:function(){return function(e){var t=n.find((function(n){return n.id===e}));window.confirm("Delete ".concat(t.name))&&g(e).then(a(n.filter((function(n){return n.id!==e}))))}(e.id)}})}))},h=t(14),E=function(e){var n=e.persons,t=e.setPersons,o=e.setNotificationMessage,c=Object(a.useState)(""),i=Object(u.a)(c,2),s=i[0],l=i[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),g=d[0],p=d[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=n.find((function(e,n,t){return e.name===s}));if(a){window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&(a.number=g,b(a.id,a).then((function(e){var r=Object(h.a)(n);r.map((function(e){e.id===a.id&&(e.number=a.number)})),t(r),o({message:"Updated ".concat(a.name),messageType:"notice"}),setTimeout((function(){o({message:null})}),5e3)})).catch((function(e){o({message:"Information of ".concat(a.name," has already been removed from server"),messageType:"error"}),setTimeout((function(){o({message:null})}),5e3),t(n.filter((function(e){return e.id!==a.id})))})))}else{var r={name:s,number:g,id:n.length+1};f(r).then((function(e){t(n.concat(r)),o({message:"Added ".concat(r.name),messageType:"notice"}),setTimeout((function(){o({message:null})}),5e3)}))}console.log("button clicked",e.target)}},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:s,onChange:function(e){l(e.target.value)}}),r.a.createElement("br",null),"number:",r.a.createElement("input",{value:g,onChange:function(e){p(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var n=e.newKeyword,t=e.setKeyword;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:n,onChange:function(e){t(e.target.value)}}))},y={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},w={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},O=function(e){var n=e.messageObj;return null===n.message?null:"notice"===n.messageType?r.a.createElement("div",{className:"notification",style:y},n.message):r.a.createElement("div",{className:"notification",style:w},n.message)},j=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),s=i[0],l=i[1],m=Object(a.useState)({message:null,type:"notice"}),f=Object(u.a)(m,2),b=f[0],g=f[1];return Object(a.useEffect)((function(){d().then((function(e){o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{messageObj:b}),r.a.createElement(v,{newKeyword:s,setKeyword:l}),r.a.createElement("h3",null,"add a new"),r.a.createElement(E,{persons:t,setPersons:o,setNotificationMessage:g}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:t,newKeyword:s,setPersons:o}))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a04828be.chunk.js.map